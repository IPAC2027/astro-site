---
export interface HeroProps {
  title: string;
  subtitle: string;
  backgroundImage?: string;
  conferenceDetails: {
    dates: string;
    location: string;
    venue: string;
  };
  callToAction: {
    primary: {
      text: string;
      href: string;
    };
    secondary: {
      text: string;
      href: string;
    };
  };
}

const { title, subtitle, backgroundImage, conferenceDetails, callToAction } = Astro.props;
---

<section 
  id="hero-section"
  class="relative bg-gradient-to-br from-primary-900 via-primary-800 to-accent-900 text-white overflow-hidden transition-all duration-[2000ms] hero-custom-ease hero-initial"
>
  {backgroundImage && (
    <div 
      class="absolute inset-0 bg-cover bg-center bg-no-repeat" 
      style={`background-image: url('${backgroundImage}');`}
    ></div>
  )}
  <div class="absolute inset-0 bg-black opacity-40"></div>
  <div class="relative h-full flex items-center justify-center transition-all duration-[2000ms] hero-custom-ease">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 w-full">
      <div class="text-center transform transition-all duration-[2000ms] hero-custom-ease">
      <h1 class="text-4xl md:text-6xl lg:text-7xl font-heading font-bold mb-6 transform transition-all duration-[2000ms] hero-custom-ease">
        {title}
      </h1>
      <h2 class="text-xl md:text-2xl lg:text-3xl font-light mb-8 transform transition-all duration-[2000ms] hero-custom-ease">
        {subtitle}
      </h2>
      
      <!-- Conference Details -->
      <div class="bg-white/10 backdrop-blur-md rounded-lg p-4 md:p-6 lg:p-8 mb-6 md:mb-8 max-w-2xl mx-auto transform transition-all duration-[2000ms] hero-custom-ease">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6 text-center">
          <div>
            <div class="text-accent-300 text-2xl md:text-3xl font-bold">{conferenceDetails.dates}</div>
            <div class="text-gray-200 text-sm md:text-base">Conference Dates</div>
          </div>
          <div>
            <div class="text-accent-300 text-2xl md:text-3xl font-bold">{conferenceDetails.location}</div>
            <div class="text-gray-200 text-sm md:text-base">{conferenceDetails.venue}</div>
          </div>
        </div>
      </div>

      <!-- Call to Action Buttons -->
      <div class="flex flex-col sm:flex-row gap-3 md:gap-4 justify-center transform transition-all duration-[2000ms] hero-custom-ease px-4">
        <a href={callToAction.primary.href} class="group bg-accent-500 hover:bg-accent-600 text-white px-8 md:px-10 py-4 rounded-lg font-semibold transition-all duration-200 text-center shadow-lg hover:shadow-xl">
          <span class="flex items-center justify-center">
            {callToAction.primary.text}
            <svg class="w-5 h-5 ml-2 group-hover:translate-x-1 transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5-5 5M6 12h12"></path>
            </svg>
          </span>
        </a>
        <a href={callToAction.secondary.href} class="group border-2 border-white text-white hover:bg-white hover:text-primary-900 px-8 md:px-10 py-4 rounded-lg font-semibold transition-all duration-200 text-center">
          <span class="flex items-center justify-center">
            {callToAction.secondary.text}
            <svg class="w-5 h-5 ml-2 group-hover:translate-x-1 transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
            </svg>
          </span>
        </a>
        <a href="/authors/abstract-submission" class="group bg-white/10 backdrop-blur-sm border border-white/30 text-white hover:bg-white/20 px-8 md:px-10 py-4 rounded-lg font-semibold transition-all duration-200 text-center">
          <span class="flex items-center justify-center">
            Submit Abstract
            <svg class="w-5 h-5 ml-2 group-hover:translate-x-1 transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
            </svg>
          </span>
        </a>
      </div>
    </div>
  </div>
  
  <!-- Decorative background elements -->
  <div class="absolute top-20 left-10 w-72 h-72 bg-accent-500 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-pulse"></div>
  <div class="absolute bottom-20 right-10 w-72 h-72 bg-primary-500 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-pulse animation-delay-2000"></div>
</section>

<style>
  /* Custom easing function: slow start, accelerate, then slow end */
  .hero-custom-ease {
    transition-timing-function: cubic-bezier(0.25, 0.1, 0.25, 1);
  }
  
  /* Initial state - large height */
  .hero-initial {
    min-height: 100vh;
  }
  
  /* Final state - smaller height */
  .hero-shrunk {
    min-height: 80vh;
  }
  
  /* Ensure content stays perfectly centered during transition */
  #hero-section {
    display: flex;
    flex-direction: column;
    position: relative;
  }
  
  #hero-section > .relative {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    min-height: inherit;
    padding: 2rem 0; /* Add some padding to prevent content from touching edges */
  }
  
  /* Responsive adjustments for better centering */
  @media (max-height: 600px) {
    .hero-initial {
      min-height: 100vh;
    }
    .hero-shrunk {
      min-height: 90vh;
    }
  }
  
  @media (max-height: 500px) {
    #hero-section > .relative {
      padding: 1rem 0;
    }
  }
  
  /* Ensure content container is properly centered */
  #hero-section .max-w-7xl {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    width: 100%;
  }
  
  /* Animation delay utility */
  .animation-delay-2000 {
    animation-delay: 2s;
  }
</style>

<script>
  // Trigger the shrink animation after page load
  document.addEventListener('DOMContentLoaded', function() {
    const heroSection = document.getElementById('hero-section');
    
    if (heroSection) {
      // Small delay to ensure initial state is rendered
      setTimeout(() => {
        heroSection.classList.remove('hero-initial');
        heroSection.classList.add('hero-shrunk');
      }, 1000); // Start animation after 1000ms (1 second)
    }
  });
</script>
